ORG 0000H
LJMP MAIN

ORG 000BH
LJMP ISRT1

ORG 0023H
LJMP ISRSERIAL

ORG 0100H
MAIN:
MOV TMOD,#00100010B
MOV SCON,#50H
MOV IE,#10011010B
MOV TH1, #246D
MOV A, #30H

SETB TI
SETB TR0
SETB TR1

GO: SJMP $

ISRT1:
CLR TF0
CPL P1.0
JNB P1.0, NEXT ;P1 İS HIGH
MOV TH0,#0C4H
RETI
NEXT:          ;P1 İS LOW
MOV TH0,#74H
RETI


ISRSERIAL:
CJNE A, #'9',NEXT1
MOV A,#30H

NEXT1:
INC A
MOV SBUF,A
CLR TI 
RETI


