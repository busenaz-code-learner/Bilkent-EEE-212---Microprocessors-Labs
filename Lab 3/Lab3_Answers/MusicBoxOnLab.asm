ORG 0000H
LJMP MAIN

ORG 0003H
LJMP EXOISR

ORG 000Bh
LJMP T1ISR

ORG 0100H

MAIN:
SPEAKER BIT P1.1 
MOV TMOD, #00010001B
MOV IE,#10000011B
SETB TCON.0
MOV R7,#20D
CLR TF0
CLR TR0
MOV TH0,#3CH ; 65536 - 50000 = 15536  
MOV TL0,#0B0H
SETB TR0


LOOP:
ACALL C5
ACALL D5
ACALL E5
ACALL F5
ACALL G5
ACALL A5
ACALL B5
ACALL C6
SJMP LOOP

RET


;------------- GENERATING PERIODS OF EACH NOTES ---------------------
C5:
JZ GO ; WHEN A = 1, 1S IS OVER SKIP OTHER NOTE
DEC A
RET
GO:
CLR TF1
SETB SPEAKER
MOV TH1,#0FCH ;find the period of half wave 
MOV TL1,#040H
SETB TR1
JNB TF1,$
CLR SPEAKER
CLR TF1
MOV TH1,#0FCH ;find the period of other half wave 
MOV TL1,#040H
JNB TF1,$
SJMP C5

;----------------------------------------------------------------------;
D5:
CJNE A,#01H,GO1 ; WHEN A = 1, 1S IS OVER SKIP OTHER NOTE
DEC A
RET
GO1:
CLR TF1
SETB SPEAKER
MOV TH1,#0FCH
MOV TL1,#0ADH
SETB TR1
JNB TF1,$
CLR SPEAKER
CLR TF1
MOV TH1,#0FCH
MOV TL1,#0ADH
JNB TF1,$
SJMP D5
;----------------------------------------------------------------------;

E5:
CJNE A,#01H,GO2 ; WHEN A = 1, 1S IS OVER SKIP OTHER NOTE
DEC A
RET
GO2:
CLR TF1
SETB SPEAKER
MOV TH1,#0FDH
MOV TL1,#009H
SETB TR1
JNB TF1,$
CLR SPEAKER
CLR TF1
MOV TH1,#0FDH
MOV TL1,#009H
JNB TF1,$
SJMP E5

;----------------------------------------------------------------------;
F5:
CJNE A,#01H,GO3 ; WHEN A = 1, 1S IS OVER SKIP OTHER NOTE
DEC A
RET
GO3:
CLR TF1
SETB SPEAKER
MOV TH1,#0FDH
MOV TL1,#034H
SETB TR1
JNB TF1,$
CLR SPEAKER
CLR TF1
MOV TH1,#0FDH
MOV TL1,#034H
JNB TF1,$
SJMP F5

;----------------------------------------------------------------------;
G5:
CJNE A,#01H,GO4 ; WHEN A = 1, 1S IS OVER SKIP OTHER NOTE
DEC A
RET
GO4:
CLR TF1
SETB SPEAKER
MOV TH1,#0FDH
MOV TL1,#082H
SETB TR1
JNB TF1,$
CLR SPEAKER
CLR TF1
MOV TH1,#0FDH
MOV TL1,#082H
JNB TF1,$
SJMP G5

;----------------------------------------------------------------------;
A5: 
CJNE A,#01H,GO5 ; WHEN A = 1, 1S IS OVER SKIP OTHER NOTE
DEC A
RET
GO5:
CLR TF1
SETB SPEAKER
MOV TH1,#0FDH
MOV TL1,#0C8H
SETB TR1
JNB TF1,$
CLR SPEAKER
CLR TF1
MOV TH1,#0FDH
MOV TL1,#0C8H
JNB TF1,$
SJMP A5

;----------------------------------------------------------------------;
B5:
CJNE A,#01H,GO6 ; WHEN A = 1, 1S IS OVER SKIP OTHER NOTE
DEC A
RET
GO6:
CLR TF1
SETB SPEAKER
MOV TH1,#0FEH
MOV TL1,#006H
SETB TR1
JNB TF1,$
CLR SPEAKER
CLR TF1
MOV TH1,#0FEH
MOV TL1,#006H
JNB TF1,$
SJMP B5

;----------------------------------------------------------------------;
C6:
CJNE A,#01H,GO7 ; WHEN A = 1, 1S IS OVER SKIP OTHER NOTE
DEC A
RET
GO7:
CLR TF1
SETB SPEAKER
MOV TH1,#0FEH
MOV TL1,#022H
SETB TR1
JNB TF1,$
CLR SPEAKER
CLR TF1
MOV TH1,#0FEH
MOV TL1,#022H
JNB TF1,$
SJMP C6

;------------ CREATE DELAY FOR 1S---------------
T1ISR:
CJNE R7,#0D,FLAG ; WHEN 1S IS OVER PUT A 1 
MOV R7, #20D
INC A
FLAG:CLR TF0 
CLR TR0
MOV TH0,#3CH
MOV TL0,#0B0H
SETB TR0
DEC R7
RETI

EXOISR:
JNB IE0, $
CLR IE0
RETI


END

